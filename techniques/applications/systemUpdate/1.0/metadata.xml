<TECHNIQUE name="System Update">
  <DESCRIPTION>This technique can handle simple system wide updates on different Linux based systems.
### Configuration

Each update is unique and *must* be tagged by a unique `campaign name`. The name will be used to reference the scheduled system update by the agent.
Updates can be scheduled by giving a start date and a duration. The update is only ran once, and there is no retry in case of error.
The error will not persist so you will have to check manually in the node report it was successful or not. Except at update time, every report generated
by the technique will have the `not_applicable` status so it should be easy to identify the proper execution time in the logs.

### Post update

The technique will automatically run a Rudder inventory after the update if it was successful. A system reboot can also be triggered if needed.
  </DESCRIPTION>
  <MULTIINSTANCE>false</MULTIINSTANCE>
  <POLICYGENERATION>separated</POLICYGENERATION>
  <USEMETHODREPORTING>true</USEMETHODREPORTING>

  <BUNDLES>
    <NAME>rudder_system_update</NAME>
  </BUNDLES>

  <TMLS>
    <TML name="systemUpdate"/>
  </TMLS>

  <SYSTEMVARS>
    <NAME>AGENT_RUN_INTERVAL</NAME>
  </SYSTEMVARS>


  <SECTIONS>
    <SECTION name="Update the system" multivalued="true" id="Update the system" component="true">
      <REPORTKEYS>
        <VALUE id="Update the system">Update the system</VALUE>
      </REPORTKEYS>
    </SECTION>
    <SECTION name="Setup variable context" multivalued="true" id="Setup variable context" component="true">
      <REPORTKEYS>
        <VALUE id="Setup variable context">Setup variable context</VALUE>
      </REPORTKEYS>
    </SECTION>
    <SECTION name="Post update" multivalued="true" id="Post update" component="true">
      <REPORTKEYS>
        <VALUE id="Post update">Post update</VALUE>
      </REPORTKEYS>
    </SECTION>
    <SECTION name="Campaign Infos" multivalued="false" component="false">
      <SELECT1>
        <NAME>ENABLE_UPDATE</NAME>
        <DESCRIPTION>Activate or not the update</DESCRIPTION>
        <ITEM>
          <LABEL>Enabled</LABEL>
          <VALUE>enabled</VALUE>
        </ITEM>
        <ITEM>
          <LABEL>Disabled</LABEL>
          <VALUE>disabled</VALUE>
        </ITEM>
      </SELECT1>
      <INPUT>
        <NAME>CAMPAIGN_NAME</NAME>
        <DESCRIPTION>Friendly name of the update campaign</DESCRIPTION>
      </INPUT>
      <SELECT1>
        <NAME>REBOOT</NAME>
        <DESCRIPTION>Reboot the node after update if needed</DESCRIPTION>
        <ITEM>
          <LABEL>Enabled</LABEL>
          <VALUE>enabled</VALUE>
        </ITEM>
        <ITEM>
          <LABEL>Disabled</LABEL>
          <VALUE>disabled</VALUE>
        </ITEM>
      </SELECT1>
    </SECTION>
    <SECTION name="Duration" multivalued="false" component="false">
      <INPUT>
        <NAME>MINUTES_SPLAY</NAME>
        <DESCRIPTION>Maximum duration in minutes of the campaign</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>HOURS_SPLAY</NAME>
        <DESCRIPTION>Maximum duration in hours of the campaign</DESCRIPTION>
      </INPUT>
    </SECTION>
    <SECTION name="Start date" multivalued="false" component="false">
      <INPUT>
        <NAME>START_ON_MINUTES</NAME>
        <DESCRIPTION>Minutes (00-59)</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>START_ON_HOURS</NAME>
        <DESCRIPTION>Hours (00-23)</DESCRIPTION>
      </INPUT>
      <INPUT>
        <NAME>START_ON_DAYS</NAME>
        <DESCRIPTION>Day (1-7, Monday is 1)</DESCRIPTION>
      </INPUT>
    </SECTION>
  </SECTIONS>
</TECHNIQUE>

